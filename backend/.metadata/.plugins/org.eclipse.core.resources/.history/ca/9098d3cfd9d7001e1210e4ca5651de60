package io.github.RazzaNoonan.messagingservice;

import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import org.springframework.stereotype.Service;

import java.util.concurrent.ExecutionException;

@Service
public class FirebaseChatService {

    private final DatabaseReference databaseReference;

    public FirebaseChatService() {
        databaseReference = FirebaseDatabase.getInstance().getReference();
    }

    public void saveMessage(String chatId, ChatMessage chatMessage) throws InterruptedException, ExecutionException {
        DatabaseReference chatsRef = databaseReference.child("chats").child(chatId);
        chatsRef.push().setValueAsync(chatMessage).get();
    }
}
